{{##def.content:
<style>
@media screen and (max-width: 480px) {
    .table th, .table td {
        text-align: center;
        font-size:10px !important;
        padding:0;
    }

    .table-parent-div {
        padding:0;
        width:107%;
        margin-left:-8px;
    }

    .class_hiddenInMobile {
        display: none;
    }

    #id_labelDate {
        display:block;
    }

    .form-control.form-control-inline.input-medium.date-picker {
        width: 87px !important;
        height: 25px;
        padding: 5px;
        display: inline;
    }

    #id_btnView {
        background-color: #b92525;
        width: 57px !important;
        border-radius: 3px !important;
        border: none;
        margin-top: -5px;
        margin-left: 10px;
        -webkit-box-shadow: 0 0 6px 0px white;
        -moz-box-shadow: 0 0 6px 0px white;
        box-shadow: 0 0 6px 0px white;
        height: 25px;
        line-height: 9px;
    }

    #id_dash {
        display:inline;
        margin: 0;
    }

    #id_introUrl {
        text-decoration: none;
        line-height: 1;
        font-weight: 400;
        color: #b92525 !important;
        text-shadow: 0 0 2px #b92525 !important;
        font-size: 11px;
        background: #000;
        padding: 5px 20px;
        border-radius: 25px !important;
    }

    #id_qrThemeBox {
        z-index: 2147483643;
        display: none;
    }

    #id_qrThemeBackButton {
        position: fixed;
        top: 1px;
        right: 3px;
        background-color: #2f2f2f;
        z-index: 2147483643;
        font-size: 20px;
        padding: 5px 10px;
        font-weight: 700;
        width: 120px;
        color: white;
        text-align: center;
        display : none;
        text-decoration: none;
    }

    .qr_theme {
        width:100%;
        border: solid 2px #2196f3;
        border-radius: 5px !important;
    }

    #id_divQR {
        display: none;
    }
}

td {
    padding : 10px 0;
}
@media screen and (min-width: 481px) {
    #id_labelDate {
        display: inline;
        margin: 10px;
    }

    .form-control.form-control-inline.input-medium.date-picker {
        width: 150px !important;
        display: inline;
    }

    #id_btnView {
        background-color: #b92525;
        width: 100px !important;
        border-radius: 3px !important;
        border: none;
        margin-top: -5px;
        margin-left: 10px;
        -webkit-box-shadow: 0 0 6px 0px white;
        -moz-box-shadow: 0 0 6px 0px white;
        box-shadow: 0 0 6px 0px white;
    }

    #id_dash {
        display: inline;
        margin: 0 10px;
    }

    #id_introUrl {
        text-decoration: none;
        line-height: 1;
        font-weight: 400;
        color: #b92525 !important;
        text-shadow: 0 0 2px #b92525 !important;
        font-size: 13px;
        background: #000;
        padding: 5px 20px;
        border-radius: 25px !important;
    }

    #id_divQR {
        display: none;
    }

    #id_qrThemeBackButton {
        display : none;
    }
}
</style>
<link rel="stylesheet" href="/vendor/treegrid/css/jquery.treegrid.css">
<link rel="stylesheet" type="text/css" href="/vendor/datepicker/datepicker.css">
<div class="portlet light" style = 'overflow-x: auto;' >
    <div class="portlet-body" id = 'id_divMainContent'>
        <div class="row" style="text-align: left;">
            <div class = 'col-md-4' style = 'margin-top: 10px; margin-bottom: 20px;'>
                <label>{{=it.translation['agent_link']}}</label> &nbsp;&nbsp;
                <a id="id_introUrl">{{=it.intro_url}}</a>
            </div>
        </div>

        <div class="row" style="text-align: center;">
            <div class = 'col-md-3' style = 'margin-top: 10px; margin-bottom: 20px;'>

                {{?it.translation.language_for == 'zh'}}
                <div class="row" style="text-align: left;">
                    <div class = 'col-md-12' style = 'margin-bottom: 20px; text-align: justify;'>
                        <p style="color:red">*</p>
                        <p style="margin-top: -30px; padding-left:15px; font-size: 14px;">
                            首次存入算力奖励：只要邀请好友，好友注册，首次存入算力，并完成首次存入的5倍，即可获得直属下级首次存入算力数额3%的奖励。
                        </p>
                        <p style="color:red">*</p>
                        <p style="margin-top: -30px; padding-left:15px; font-size: 14px;">邀请5名好友即可成为普通代理，任意好友投入算力，您都可以获得他投入算力总量的2.5%作为奖励，5名好友中的任意一位成为代理后，在获得他投入算力总量的2.5%的基础上，您还可以获取他的下级用户投入算力总量的1%，以此类推，三级截止，无限量发展。您将有更多的策略灵活调整您的奖励机制和体系。</p>
                        <p style="font-size: 12px;"><b>注：当下属用户每轮获取算力资源倍数在1.4倍以下时，将不会有数字资源奖励产生。</b></p>
                    </div>
                </div>
                {{?}}


            </div>
            <div class = 'col-md-6'>
                <div  style="background-color:white; width: 300px; margin: 0 auto;" id = 'id_divCode'>
                    {{=it.intro_url_qr_svg}}
                </div>
            </div>
            <div class = 'col-md-3'>

                <div style = 'margin:0 auto; width:50%; height:50%;' align = 'center'>

                </div>

            </div>
        </div>
        <div class ='row' style = 'margin-top: 10px;'>
            <div class = 'col-md-3'></div>
            <div class = 'col-md-6' align='center'>
                <h1 style="margin-top: 0; font-weight: bold;">{{=it.translation['agent_title']}}</h1>
            </div>
        </div>
        <div class="row">
            <div class = 'col-md-12' >
                <form action="/agent" method="POST" id="id_formDateRange">
                    <div class="form-group">
                        <div class="col-md-12" align='center' style="padding:0;">
                            <label style="" id = "id_labelDate">{{=it.translation.gamehistory_daterange_date}}</label>
                            <input class="form-control form-control-inline input-medium date-picker" size=  "16"
                                   type="text" name='date_from' value="{{=it.date_from}}"/>
                            <label id='id_dash' > ~ </label>
                            <input class="form-control form-control-inline input-medium date-picker" size="16"
                                   type="text" name='date_to' value="{{=it.date_to}}"/>
                            <input class="btn btn-primary form-control form-control-inline input-medium"
                                   type="button" value="View" id="id_btnView">
                            <input type = 'hidden' value = '' name = 'time_zone_name' id = 'time_zone_name'>
                        </div>
                        <div class="col-md-3">
                            <input class="btn btn-primary form-control form-control-inline input-medium" style='background-color: #428bca; width:100px !important; margin-top: 25px;' type = 'hidden' value = "{{=it.translation['agent_report']}}" id="id_btnMakePDF"/>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class = 'row'>
            <div class = 'col-md-12'>
                <table class="table tree" style='font-size:20px; margin-top:40px;'>
                    <thead style = 'font-weight: bold;'>
                    <tr>
                        <td>{{=it.translation['global_username']}}</td>
                        <td>{{=it.translation['agent_table_header_commission']}}</td>
                        <td>{{=it.translation['agent_table_header_fundingbonus']}}</td>
                        <td>{{=it.translation['agent_table_header_volume']}}</td>
                        <td>{{=it.translation['agent_table_header_grossprofit']}}</td>
                        {{?it.user.userclass=="master_ib"}}
                        <td>{{=it.translation['agent_table_header_netprofit']}}</td>
                        <td>{{=it.translation['agent_table_header_deposit']}}</td>
                        <td>{{=it.translation['agent_table_header_withdraw']}}</td>
                        <td>{{=it.translation['agent_table_header_balance']}}</td>
                        {{?}}
                    </tr>
                    </thead>
                    {{?it.statistics != "" && it.statistics}}
                    {{~it.statistics['players'] :player:index}}
                    <tr class="treegrid-{{=player.path}} {{?player.path_depth>1}}treegrid-parent-{{=player.path.substring(0, player.path.length - 3)}}{{?}}">
                        <td style = 'padding: 10px 0'>{{=player.username}}</td>
                        <td>
                            {{?player.path_depth==1}}
                            {{?player.sum_profit_for_parent1}}{{=Math.round(player.sum_profit_for_parent1)}}{{??}}0{{?}}
                            {{??player.path_depth==2}}
                            {{?player.sum_profit_for_parent2}}{{=Math.round(player.sum_profit_for_parent2)}}{{??}}0{{?}}
                            {{??player.path_depth==3}}
                            {{?player.sum_profit_for_parent3}}{{=Math.round(player.sum_profit_for_parent3)}}{{??}}0{{?}}
                            {{??}}
                            {{?player.sum_profit_for_master_ib}}{{=Math.round(player.sum_profit_for_master_ib)}}{{??}}0{{?}}
                            {{?}} bits
                        </td>
                        <td>
                            {{?player.path_depth==1}}
                            {{?player.first_deposit_profit}}{{=Math.round(player.first_deposit_profit)}}{{??}}0{{?}} bits
                            {{?}}
                        </td>
                        <td>
                            {{?player.sum_bet}}{{=Math.round(player.sum_bet)}}{{??}}0{{?}} bits
                        </td>
                        <td>
                            {{?player.sum_gross_profit}}{{=Math.round(player.sum_gross_profit)}}{{??}}0{{?}} bits
                        </td>
                        {{?it.user.userclass=="master_ib"}}
                        <td>
                            {{?player.sum_net_profit}}{{=Math.round(player.sum_net_profit)}}{{??}}0{{?}} bits
                        </td>
                        <td>
                            {{?player.sum_deposit}}{{=Math.round(player.sum_deposit)}}{{??}}0{{?}} bits
                        </td>
                        <td>
                            {{?player.sum_withdraw}}{{=Math.round(player.sum_withdraw)}}{{??}}0{{?}} bits
                        </td>
                        <td>
                            {{?player.balance_satoshis}}{{=Math.round(player.balance_satoshis)}}{{??}}0{{?}} bits
                        </td>
                        {{?}}


                    </tr>
                    {{~}}
                    <tr style="border-top: 2px solid #428bcb; font-weight:bolder;">
                        <td style = 'padding: 10px 0'> {{=it.translation['agent_table_total']}} </td>
                        <td>
                            {{?it.statistics.total_profit}}{{=Math.round(it.statistics.total_profit)}}{{??}}0{{?}} bits
                        </td>
                        <td>
                            {{?it.statistics.total_funding_bonus}}{{=Math.round(it.statistics.total_funding_bonus)}}{{??}}0{{?}} bits
                        </td>
                        <td>
                            {{?it.statistics.total_bet}}{{=Math.round(it.statistics.total_bet)}}{{??}}0{{?}} bits
                        </td>
                        <td>
                            {{?it.statistics.total_gross_profit}}{{=Math.round(it.statistics.total_gross_profit)}}{{??}}0{{?}} bits
                        </td>
                        {{?it.user.userclass=="master_ib"}}
                        <td>
                            {{?it.statistics.total_net_profit}}{{=Math.round(it.statistics.total_net_profit)}}{{??}}0{{?}} bits
                        </td>
                        <td>
                            {{?it.statistics.total_deposit}}{{=Math.round(it.statistics.total_deposit)}}{{??}}0{{?}} bits
                        </td>
                        <td>
                            {{?it.statistics.total_withdraw}}{{=Math.round(it.statistics.total_withdraw)}}{{??}}0{{?}} bits
                        </td>
                        <td>
                            {{?it.statistics.total_balance}}{{=Math.round(it.statistics.total_balance)}}{{??}}0{{?}} bits
                        </td>
                        {{?}}
                    </tr>
                    {{?}}
                </table>
            </div>
        </div>
    </div>
    <div class="portlet-body" id = 'id_divQR' style="margin-top: -20px;">
        <div id = 'id_qrThemeBox'>
            <div class = 'row'>
                <div class = 'col-xs-6' style = 'padding: 5px 10px;'>
                    <img src = '/img/mobile_qr/mobile_qr1_sample.png' class = 'qr_theme' themeType = '1'>
                </div>
                <div class = 'col-xs-6' style = 'padding: 5px 10px;'>
                    <img src = '/img/mobile_qr/mobile_qr2_sample.png' class = 'qr_theme' themeType = '2'>
                </div>
            </div>
            <div class = 'row'>
                <div class = 'col-xs-6' style = 'padding: 5px 10px;'>
                    <img src = '/img/mobile_qr/mobile_qr3_sample.png' class = 'qr_theme' themeType = '3'>
                </div>
                <div class = 'col-xs-6' style = 'padding: 5px 10px;'>
                    <img src = '/img/mobile_qr/mobile_qr4_sample.png' class = 'qr_theme' themeType = '4'>
                </div>
            </div>
        </div>
    </div>
</div>

<a id = 'id_qrThemeBackButton'>Back</a>

<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
<!-- BEGIN CORE PLUGINS -->
<!--[if lt IE 9]>
<script src="/metronic/assets/global/plugins/respond.min.js"></script>
<script src="/metronic/assets/global/plugins/excanvas.min.js"></script>
<![endif]-->

<script src="/metronic/assets/global/plugins/jquery-migrate.min.js" type="text/javascript"></script>
<!-- IMPORTANT! Load jquery-ui.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
<script src="/metronic/assets/global/plugins/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
<script src="/metronic/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/metronic/assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
<script src="/metronic/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="/metronic/assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="/metronic/assets/global/plugins/jquery.cokie.min.js" type="text/javascript"></script>
<script src="/metronic/assets/global/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>
<script src="/metronic/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<script type="text/javascript" src="/vendor/datepicker/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="/vendor/treegrid/js/jquery.treegrid.js"></script>
<script type="text/javascript" src="/vendor/treegrid/js/jquery.treegrid.bootstrap3.js"></script>
<script type="text/javascript" src="/vendor/clipboard/clipboard.min.js"></script>

<script type="text/javascript" src="/vendor/jspdf/dist/jspdf.debug.js"></script>
<script src="/metronic/assets/global/plugins/bootstrap-toastr/toastr.min.js" type="text/javascript"></script>
<script src="/metronic/assets/admin/pages/scripts/ui-toastr.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<script defer src="/fonts/font-awesome/svg-with-js/js/fontawesome-all.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jstimezonedetect/1.0.4/jstz.min.js" type="text/javascript"></script>
<script src="/metronic/assets/global/scripts/metronic.js" type="text/javascript"></script>
<script src="/metronic/assets/admin/layout2/scripts/layout.js" type="text/javascript"></script>



<script>
    $(document).ready(function() {
        Metronic.init();
        Layout.init();

        if (jQuery().datepicker) {
            $('.date-picker').datepicker({
                format: 'yyyy-mm-dd',
                rtl: Metronic.isRTL(),
                orientation: "left",
                autoclose: true
            });
        }

        set_clipboard();

        $('.tree').treegrid();
        var timezone = jstz.determine();
        $("#time_zone_name").val(timezone.name());

        $('#id_date_from').datepicker({
            format: 'yyyy-mm-dd'
        });

        $('#id_date_to').datepicker({
            format: 'yyyy-mm-dd'
        });

        $(document).on('click', '#id_btnView', function() {
            $("#id_formDateRange").submit();
        });

        $(document).on('click', '#id_btnMakePDF', function() {

            var pdf = new jsPDF();
            pdf.setFontSize(25);
            pdf.text(75, 40, 'MADABIT Report');

            pdf.setFontSize(20);
            pdf.text(80, 65, 'Agent Statistics');

            pdf.text(' Players in 1st Layer\r' +
                    'Players in 2nd Layer\r' +
                    'Players in 3rd Layer\r' +
                    '      Commission\r' +
                    '     Total Volume\r' +
                    '     Gross Profit\r' +
                    '       Net Profit',
                    90,80, 'center' );
            pdf.text(':\r:\r:\r:\r:\r:\r:', 130,80, 'center' );
            {{?it.statistics}}
            pdf.text(' {{=it.statistics.player_count_layer1}} Bits\r' +
                    ' {{=it.statistics.player_count_layer2}} Bits\r' +
                    ' {{=it.statistics.player_count_layer3}} Bits\r' +
                    ' {{=it.statistics.total_bet}} Bits\r' +
                    ' {{=it.statistics.total_bet}} Bits\r' +
                    ' {{=it.statistics.total_gross_profit}} Bits\r' +
                    ' {{=it.statistics.total_net_profit}} Bits',
                    140,80, 'center' );
            {{?}}
            pdf.save('Agent Report.pdf');
        });

        $(document).on('click', '#id_divCode', function() {
            if(screen.width <= 480) {
                $("#id_divMainContent").hide();
                $("#id_divQR").show();
                $("#id_qrThemeBox").fadeIn(600);
                $("#id_qrThemeBackButton").fadeIn(600);
            }
        });

        $(document).on('click', '#id_qrThemeBackButton', function() {
            $("#id_divMainContent").show();
            $("#id_divQR").hide();
            $("#id_qrThemeBox").fadeOut();
            $("#id_qrThemeBackButton").fadeOut();
        });

        $(document).on('click', '.qr_theme', function() {
            var themeType = $(this).attr('themeType');
            window.location.href = '/mobile-qr/' + themeType;
        });
    });

    function set_clipboard() {
        var clipboard = new ClipboardJS('#id_introUrl', {
            text: function() {
                return $("#id_introUrl").text() + '/?clang=zh';
            }
        });

        clipboard.on('success', function(e) {
            toastr['success']('{{=it.translation.agent_alert0}}', '{{=it.translation.admin_staff_success}}'+'{{=it.translation.admin_staff_notification}}');
        });

        clipboard.on('error', function(e) {
            toastr['error']('{{=it.translation.agent_alert1}}', '{{=it.translation.admin_staff_error}}'+'{{=it.translation.admin_staff_notification}}');
        });
    }
</script>
<!-- END JAVASCRIPTS -->
#}}


{{#def.include('./template/main')}}
